1. Проверьте список доступных сетевых интерфейсов на вашем компьютере. Какие команды есть для этого в Linux и в Windows?

```bash
lsd@nucub:~$ ip address

1: lo: <LOOPBACK,UP,LOWER_UP> mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000

link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00

inet 127.0.0.1/8 scope host lo

   valid_lft forever preferred_lft forever

inet6 ::1/128 scope host 

   valid_lft forever preferred_lft forever
2: enp3s0: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc fq_codel state UP group default qlen 1000 link/ether b8:ae:ed:7c:e4:7b brd ff:ff:ff:ff:ff:ff

inet 192.168.0.3/24 brd 192.168.0.255 scope global enp3s0

   valid_lft forever preferred_lft forever

inet6 fe80::baae:edff:fe7c:e47b/64 scope link 

   valid_lft forever preferred_lft forever
3: wlp2s0: <BROADCAST,MULTICAST> mtu 1500 qdisc noop state DOWN group default qlen 1000

link/ether e0:94:67:15:1b:20 brd ff:ff:ff:ff:ff:ff
4: docker0: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc noqueue state UP group default

link/ether 02:42:7d:c2:4d:74 brd ff:ff:ff:ff:ff:ff

inet 172.17.0.1/16 brd 172.17.255.255 scope global docker0

   valid_lft forever preferred_lft forever

inet6 fe80::42:7dff:fec2:4d74/64 scope link 

   valid_lft forever preferred_lft forever
6: veth639b22e@if5: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc noqueue master docker0 state UP group default

link/ether 72:3a:a8:83:f3:42 brd ff:ff:ff:ff:ff:ff link-netnsid 0

inet6 fe80::703a:a8ff:fe83:f342/64 scope link 

   valid_lft forever preferred_lft forever
8: veth7efea37@if7: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc noqueue master docker0 state UP group default

link/ether 16:58:a7:e2:fc:08 brd ff:ff:ff:ff:ff:ff link-netnsid 1

inet6 fe80::1458:a7ff:fee2:fc08/64 scope link 

   valid_lft forever preferred_lft forever
PS C:\Users\adm_shestikhin_a> ipconfig

Настройка протокола IP для Windows

Неизвестный адаптер Подключение по локальной сети 2:

Состояние среды. . . . . . . . : Среда передачи недоступна. DNS-суффикс подключения . . . . . :

Адаптер Ethernet Ethernet:

Состояние среды. . . . . . . . : Среда передачи недоступна. DNS-суффикс подключения . . . . . :

Неизвестный адаптер OpenVPN Wintun:

Состояние среды. . . . . . . . : Среда передачи недоступна. DNS-суффикс подключения . . . . . :

Адаптер Ethernet vEthernet (Default Switch):

DNS-суффикс подключения . . . . . : Локальный IPv6-адрес канала . . . : fe80::243d:4f6c:c942:6297%34 IPv4-адрес. . . . . . . . . . . . : 172.31.208.1 Маска подсети . . . . . . . . . . : 255.255.240.0 Основной шлюз. . . . . . . . . :

Адаптер Ethernet vEthernet (Беспроводная се):

DNS-суффикс подключения . . . . . : Локальный IPv6-адрес канала . . . : fe80::7d22:7bdf:8ed2:9b35%71 IPv4-адрес. . . . . . . . . . . . : 172.18.224.1 Маска подсети . . . . . . . . . . : 255.255.240.0 Основной шлюз. . . . . . . . . :

Адаптер Ethernet vEthernet (Ethernet 2):

DNS-суффикс подключения . . . . . : Локальный IPv6-адрес канала . . . : fe80::c13e:b090:3b0e:7655%67 IPv4-адрес. . . . . . . . . . . . : 172.17.96.1 Маска подсети . . . . . . . . . . : 255.255.240.0 Основной шлюз. . . . . . . . . :

Адаптер Ethernet Ethernet 2:

DNS-суффикс подключения . . . . . : Локальный IPv6-адрес канала . . . : fe80::c153:1b8e:c074:13d%27 IPv4-адрес. . . . . . . . . . . . : 10.122.57.186 Маска подсети . . . . . . . . . . : 255.255.255.0 Основной шлюз. . . . . . . . . : 10.122.57.254

Адаптер Ethernet VirtualBox Host-Only Network:

DNS-суффикс подключения . . . . . : Локальный IPv6-адрес канала . . . : fe80::1dd4:4b4c:397d:19f4%31 IPv4-адрес. . . . . . . . . . . . : 192.168.56.1 Маска подсети . . . . . . . . . . : 255.255.255.0 Основной шлюз. . . . . . . . . :

Неизвестный адаптер Подключение по локальной сети:

Состояние среды. . . . . . . . : Среда передачи недоступна. DNS-суффикс подключения . . . . . :

Адаптер беспроводной локальной сети Подключение по локальной сети* 12:

Состояние среды. . . . . . . . : Среда передачи недоступна. DNS-суффикс подключения . . . . . :

Адаптер беспроводной локальной сети Беспроводная сеть:

Состояние среды. . . . . . . . : Среда передачи недоступна. DNS-суффикс подключения . . . . . :

Адаптер Ethernet Сетевое подключение Bluetooth:

Состояние среды. . . . . . . . : Среда передачи недоступна. DNS-суффикс подключения . . . . . :

Адаптер Ethernet vEthernet (VirtualBox Host):

DNS-суффикс подключения . . . . . : Локальный IPv6-адрес канала . . . : fe80::7063:c1d2:60b0:c21%57 IPv4-адрес. . . . . . . . . . . . : 172.31.16.1 Маска подсети . . . . . . . . . . : 255.255.240.0 Основной шлюз. . . . . . . . . :

Адаптер Ethernet vEthernet (Ethernet):

DNS-суффикс подключения . . . . . : Локальный IPv6-адрес канала . . . : fe80::a0a5:961a:39f3:3515%76 IPv4-адрес. . . . . . . . . . . . : 172.17.192.1 Маска подсети . . . . . . . . . . : 255.255.240.0 Основной шлюз. . . . . . . . . :
```

2. Какой протокол используется для распознавания соседа по сетевому интерфейсу? Какой пакет и команды есть в Linux для этого?

Link Layer Discovery Protocol (LLDP) — протокол канального уровня, позволяющий сетевому оборудованию оповещать оборудование, работающее в локальной сети, о своём существовании и передавать ему свои характеристики, а также получать от него аналогичные сведения.

Пакет `lldpd`.

Команда `lldpctl`.

3. Какая технология используется для разделения L2 коммутатора на несколько виртуальных сетей? Какой пакет и команды есть в Linux для этого? Приведите пример конфига.

Технология называется VLAN (Virtual LAN).

Пакет в Ubuntu Linux - vlan

```bash
vi /etc/network/interfaces

auto vlan1400

iface vlan1400 inet static

address 192.168.1.1

netmask 255.255.255.0

vlan_raw_device eth0
```

4. Какие типы агрегации интерфейсов есть в Linux? Какие опции есть для балансировки нагрузки? Приведите пример конфига.

В Linux есть две технологии агрегации (LAG): `bonding` и `teaming`.

Типы агрегации bonding:

`balance-rr` - Политика round-robin. Пакеты отправляются последовательно, начиная с первого доступного интерфейса и заканчивая последним. Эта политика применяется для балансировки нагрузки и отказоустойчивости.

`active-backup` - Политика активный-резервный. Только один сетевой интерфейс из объединённых будет активным. Другой интерфейс может стать активным, только в том случае, когда упадёт текущий активный интерфейс. Эта политика применяется для отказоустойчивости.

`balance-xor` - Политика XOR. Передача распределяется между сетевыми картами используя формулу: [( «MAC адрес источника» XOR «MAC адрес назначения») по модулю «число интерфейсов»]. Получается одна и та же сетевая карта передаёт пакеты одним и тем же получателям. Политика XOR применяется для балансировки нагрузки и отказоустойчивости.

`broadcast` - Широковещательная политика. Передает всё на все сетевые интерфейсы. Эта политика применяется для отказоустойчивости.

`802.3ad` - Политика агрегирования каналов по стандарту IEEE 802.3ad. Создаются агрегированные группы сетевых карт с одинаковой скоростью и дуплексом. При таком объединении передача задействует все каналы в активной агрегации, согласно стандарту IEEE 802.3ad. Выбор через какой интерфейс отправлять пакет определяется политикой по умолчанию XOR политика.

`balance-tlb` - Политика адаптивной балансировки нагрузки передачи. Исходящий трафик распределяется в зависимости от загруженности каждой сетевой карты (определяется скоростью загрузки). Не требует дополнительной настройки на коммутаторе. Входящий трафик приходит на текущую сетевую карту. Если она выходит из строя, то другая сетевая карта берёт себе MAC адрес вышедшей из строя карты.

`balance-alb` - Политика адаптивной балансировки нагрузки. Включает в себя политику balance-tlb плюс осуществляет балансировку входящего трафика. Не требует дополнительной настройки на коммутаторе. Балансировка входящего трафика достигается путём ARP переговоров.

balance-alb - балансировка:

bonds:

```bash
 bond0: 

   dhcp4: yes 

   interfaces:

     - ens3

     - ens5

   parameters:

     mode: balance-alb

     mii-monitor-interval: 2
```

5. Сколько IP адресов в сети с маской /29 ? Сколько /29 подсетей можно получить из сети с маской /24. Приведите несколько примеров /29 подсетей внутри сети 10.10.10.0/24.

```bash
lsd@nucub:~$ ipcalc -b 10.10.10.0/29

Address: 10.10.10.0

Netmask: 255.255.255.248 = 29

Wildcard: 0.0.0.7

=>

Network: 10.10.10.0/29

HostMin: 10.10.10.1

HostMax: 10.10.10.6

Broadcast: 10.10.10.7

Hosts/Net: 6 Class A, Private Internet
```
8 ip адресов: 6 хостов, 1 адрес сети, 1 широковещательный

Сеть с маской /24 можно разбить на 32 подсети с маской /29


6. Задача: вас попросили организовать стык между 2-мя организациями. Диапазоны 10.0.0.0/8, 172.16.0.0/12, 192.168.0.0/16 уже заняты. Из какой подсети допустимо взять частные IP адреса? Маску выберите из расчета максимум 40-50 хостов внутри подсети.

```bash
lsd@nucub:~$ ipcalc -b 100.64.0.0/10 -s 50

Address: 100.64.0.0

Netmask: 255.192.0.0 = 10

Wildcard: 0.63.255.255

=>

Network: 100.64.0.0/10

HostMin: 100.64.0.1

HostMax: 100.127.255.254

Broadcast: 100.127.255.255

Hosts/Net: 4194302 Class A

Requested size: 50 hosts
Netmask: 255.255.255.192 = 26

Network: 100.64.0.0/26

HostMin: 100.64.0.1

HostMax: 100.64.0.62

Broadcast: 100.64.0.63

Hosts/Net: 62 Class A
```
Маска будет /26, она позволит подключить 62 хоста.

7. Как проверить ARP таблицу в Linux, Windows? Как очистить ARP кеш полностью? Как из ARP таблицы удалить только один нужный IP?

Проверить таблицу можно так:

Linux: `ip neigh`, `arp -n`

Windows: `arp -a`

Очистить кеш так:

Linux: `ip neigh flush`

Windows: `arp -d *`

Удалить один IP так:

Linux: `ip neigh delete dev` , `arp -d`

Windows: `arp -d`